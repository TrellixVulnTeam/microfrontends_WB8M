const a7_0x57c3=['Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','targetDependencies','size','./distributed-execution.api','executionStatus:\x20','Retrieving\x20artifacts\x20from\x20','COMPLETED','addTaskDependencies','url','ENCRYPTION_KEY','terminalOutput','delete','runUrl','../../../utilities/metric-logger','addTaskToGraph','findTask','reset','number\x20of\x20completed\x20tasks:\x20','strictlyOrderedTargets','configuration','done','indexOf','hash','target','assign','splitTasksIntoStages','readFileSync','length','criticalErrorMessage','projects','Starting\x20distributed\x20command\x20execution','completedTasks','nxCloudDistributedTasksRunner','addDependencies','Command\x20execution\x20failed.','../../../utilities/waiter','has','run','encryptionKey','ErrorReporterApi','Successfully\x20completed\x20running\x20the\x20command.','logCommand','project','commandStatus','defaultTargetDependencies','VERBOSE_LOGGING','stdout','tasks','__awaiter','TaskGraphCreator','executionId:\x20','../../error/print-run-group-error','E2EEncryption','build','filter','map','exit','message','start','../../../utilities/create-no-new-messages-timeout','cacheDirectory','addVerticalSeparator','find','lifeCycle','endTask','printRunGroupError','strip-json-comments','error','join','completeRunGroupWithError','Waiter','defineProperty','createStartRequest','../../file-storage/e2e-encryption','add','dependencies','./node_modules/.cache/nx','axiosException','executionStatus','value','scheduleTask','FileStorage','projectGraph','self','toString','startTask','taskId','../../../utilities/environment','Extracting\x20artifacts','createTaskGraph','log','Error:','parse','__esModule','overrides','push','Waiting...','keys','note','write','../../file-storage/file-storage','roots','Processing\x20task\x20','submitRunMetrics','See\x20run\x20details\x20at\x20','success','nodes','then','Found\x20unknown\x20task:\x20'];(function(_0x47b77f,_0x57c384){const _0x493140=function(_0x21325c){while(--_0x21325c){_0x47b77f['push'](_0x47b77f['shift']());}};_0x493140(++_0x57c384);}(a7_0x57c3,0x191));const a7_0x4931=function(_0x47b77f,_0x57c384){_0x47b77f=_0x47b77f-0x0;let _0x493140=a7_0x57c3[_0x47b77f];return _0x493140;};'use strict';var __awaiter=this&&this[a7_0x4931('0x53')]||function(_0x95a642,_0x21c9ea,_0x65a14f,_0x1c91ee){function _0xec83c9(_0x1b8d98){return _0x1b8d98 instanceof _0x65a14f?_0x1b8d98:new _0x65a14f(function(_0x54d930){_0x54d930(_0x1b8d98);});}return new(_0x65a14f||(_0x65a14f=Promise))(function(_0x47ec6e,_0x526e75){function _0x3248c2(_0x2e299b){try{_0x1f3e81(_0x1c91ee['next'](_0x2e299b));}catch(_0x30c41a){_0x526e75(_0x30c41a);}}function _0x40d160(_0x403dcc){try{_0x1f3e81(_0x1c91ee['throw'](_0x403dcc));}catch(_0x1e4af4){_0x526e75(_0x1e4af4);}}function _0x1f3e81(_0x114734){_0x114734[a7_0x4931('0x37')]?_0x47ec6e(_0x114734['value']):_0xec83c9(_0x114734[a7_0x4931('0x5')])[a7_0x4931('0x21')](_0x3248c2,_0x40d160);}_0x1f3e81((_0x1c91ee=_0x1c91ee['apply'](_0x95a642,_0x21c9ea||[]))['next']());});};Object[a7_0x4931('0x6a')](exports,a7_0x4931('0x13'),{'value':!![]});exports[a7_0x4931('0x54')]=exports[a7_0x4931('0x43')]=void 0x0;const stripJsonComments=require(a7_0x4931('0x65'));const fs_1=require('fs');const distributed_execution_api_1=require(a7_0x4931('0x26'));const file_storage_1=require(a7_0x4931('0x1a'));const e2e_encryption_1=require(a7_0x4931('0x6c'));const waiter_1=require(a7_0x4931('0x46'));const environment_1=require(a7_0x4931('0xd'));const print_run_group_error_1=require(a7_0x4931('0x56'));const create_no_new_messages_timeout_1=require(a7_0x4931('0x5e'));const metric_logger_1=require(a7_0x4931('0x30'));const error_reporter_api_1=require('../../api/error-reporter.api');const {output,workspaceRoot,getDependencyConfigs,getOutputs,unparse,Cache}=require('../../../utilities/nx-imports');class NoopLifeCycle{[a7_0x4931('0x6')](_0x2e3e46){}[a7_0x4931('0xb')](_0x11806b){}[a7_0x4931('0x63')](_0x3cde2b,_0x4ca545){}}function runDistributedExecution(_0x45122e,_0x3ddd82,_0x264f67,_0x3384c7,_0x483090,_0x2b8694,_0x82dd21){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x34b2a0=JSON[a7_0x4931('0x12')](stripJsonComments((0x0,fs_1[a7_0x4931('0x3d')])(workspaceRoot+'/nx.json')[a7_0x4931('0xa')]()));const _0x248d0d=new TaskOrderer(_0x264f67[a7_0x4931('0x8')],getDefaultDependencyConfigs(_0x34b2a0,_0x3ddd82))[a7_0x4931('0x3c')](_0x82dd21);const _0x19af0b=yield _0x45122e[a7_0x4931('0x5d')]((0x0,distributed_execution_api_1[a7_0x4931('0x6b')])(_0x2b8694,_0x248d0d,_0x3ddd82));return yield processTasks(_0x45122e,_0x3384c7,_0x483090,_0x3ddd82,_0x19af0b,_0x82dd21,_0x264f67);});}function processTasks(_0x68b70e,_0x535c19,_0x372307,_0x2242f2,_0x212d22,_0x575f23,_0x541205){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1ffe7f={};const _0x111981=(0x0,create_no_new_messages_timeout_1['createNoNewMessagesTimeout'])();const _0x4144af=new waiter_1[(a7_0x4931('0x69'))]();while(!![]){if(environment_1[a7_0x4931('0x50')]){output[a7_0x4931('0x18')]({'title':a7_0x4931('0x16')});}yield _0x4144af['wait']();const _0x40456a=yield _0x68b70e['status'](_0x212d22);if(environment_1['VERBOSE_LOGGING']){output['note']({'title':'Status\x20update','bodyLines':[a7_0x4931('0x55')+_0x212d22,a7_0x4931('0x27')+_0x40456a[a7_0x4931('0x4')],a7_0x4931('0x34')+_0x40456a[a7_0x4931('0x42')]['length'],'error:\x20'+_0x40456a[a7_0x4931('0x3f')]]});}if(_0x40456a[a7_0x4931('0x3f')]){output[a7_0x4931('0x66')]({'title':'Distributed\x20Execution\x20Terminated','bodyLines':[a7_0x4931('0x11'),_0x40456a['criticalErrorMessage']]});process[a7_0x4931('0x5b')](0x1);}_0x111981(_0x40456a[a7_0x4931('0x42')][a7_0x4931('0x3e')]);for(const _0x531641 of _0x40456a[a7_0x4931('0x42')]){if(_0x1ffe7f[_0x531641[a7_0x4931('0xc')]])continue;yield processTask(_0x535c19,_0x372307,_0x541205,_0x2242f2,_0x575f23,_0x531641);_0x4144af[a7_0x4931('0x33')]();_0x1ffe7f[_0x531641['taskId']]=!![];}if(_0x40456a[a7_0x4931('0x4')]===a7_0x4931('0x29')){return{'commandStatus':_0x40456a[a7_0x4931('0x4e')],'runUrl':_0x40456a[a7_0x4931('0x2f')]};}}});}function processTask(_0x4e1607,_0x37bc6f,_0x94426d,_0x927ec8,_0x595956,_0x14b5ea){return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a7_0x4931('0x50')]){output['note']({'title':a7_0x4931('0x1c')+_0x14b5ea[a7_0x4931('0xc')]});}const _0x1b058b=_0x595956[a7_0x4931('0x61')](_0x3aef1d=>_0x14b5ea[a7_0x4931('0xc')]===_0x3aef1d['id']);if(!_0x1b058b){throw new Error(a7_0x4931('0x22')+_0x14b5ea[a7_0x4931('0xc')]);}if(environment_1[a7_0x4931('0x50')]){output[a7_0x4931('0x18')]({'title':a7_0x4931('0x28')+_0x14b5ea[a7_0x4931('0x2b')]});}yield _0x4e1607['retrieve'](_0x14b5ea[a7_0x4931('0x39')],_0x14b5ea['url'],_0x927ec8[a7_0x4931('0x5f')]||a7_0x4931('0x2'));const _0x342e7b=yield _0x37bc6f['get'](Object[a7_0x4931('0x3b')](Object[a7_0x4931('0x3b')]({},_0x1b058b),{'hash':_0x14b5ea[a7_0x4931('0x39')]}));const _0x4ea860=getOutputs(_0x94426d[a7_0x4931('0x8')][a7_0x4931('0x20')],_0x1b058b);if(environment_1[a7_0x4931('0x50')]){output[a7_0x4931('0x18')]({'title':a7_0x4931('0xe'),'bodyLines':_0x4ea860});}yield _0x37bc6f['copyFilesFromCache'](_0x14b5ea[a7_0x4931('0x39')],_0x342e7b,_0x4ea860);output[a7_0x4931('0x4c')](getCommand(_0x1b058b));process[a7_0x4931('0x51')][a7_0x4931('0x19')](_0x342e7b[a7_0x4931('0x2d')]);output[a7_0x4931('0x60')]();});}function getCommand(_0x130a5c){const _0x5c39ae=unparse(_0x130a5c[a7_0x4931('0x14')]||{});const _0x20339a=_0x130a5c['target']['configuration']?':'+_0x130a5c[a7_0x4931('0x3a')][a7_0x4931('0x36')]:'';return['nx',a7_0x4931('0x48'),_0x130a5c[a7_0x4931('0x3a')][a7_0x4931('0x4d')]+':'+_0x130a5c[a7_0x4931('0x3a')][a7_0x4931('0x3a')]+_0x20339a,..._0x5c39ae][a7_0x4931('0x67')]('\x20');}const nxCloudDistributedTasksRunner=(_0x479b4a,_0x388d95,_0x471632)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){if(environment_1[a7_0x4931('0x50')]){output['note']({'title':a7_0x4931('0x41')});}_0x388d95[a7_0x4931('0x62')]=new NoopLifeCycle();const _0x359fb0=(0x0,environment_1['getRunGroup'])();if(!_0x359fb0){(0x0,print_run_group_error_1[a7_0x4931('0x64')])();return process[a7_0x4931('0x5b')](0x1);}const _0x52bf81=new e2e_encryption_1[(a7_0x4931('0x57'))](environment_1[a7_0x4931('0x2c')]||_0x388d95[a7_0x4931('0x49')]);const _0x586baf=new error_reporter_api_1[(a7_0x4931('0x4a'))](_0x388d95);const _0x2d6dc4=new file_storage_1[(a7_0x4931('0x7'))](_0x52bf81,_0x586baf,!![]);const _0x936a49=new Cache(_0x388d95);const _0x42a246=new distributed_execution_api_1['DistributedExecutionApi'](_0x388d95);try{const _0x2ad979=yield runDistributedExecution(_0x42a246,_0x388d95,_0x471632,_0x2d6dc4,_0x936a49,_0x359fb0,_0x479b4a);if(_0x2ad979[a7_0x4931('0x4e')]===0x0){output[a7_0x4931('0x1f')]({'title':a7_0x4931('0x4b'),'bodyLines':[a7_0x4931('0x1e')+_0x2ad979['runUrl']]});}else{output[a7_0x4931('0x66')]({'title':a7_0x4931('0x45'),'bodyLines':[a7_0x4931('0x1e')+_0x2ad979[a7_0x4931('0x2f')]]});}yield(0x0,metric_logger_1[a7_0x4931('0x1d')])(_0x388d95);process[a7_0x4931('0x5b')](_0x2ad979[a7_0x4931('0x4e')]);}catch(_0x203c20){output[a7_0x4931('0x66')]({'title':'Unable\x20to\x20complete\x20a\x20run.','bodyLines':[_0x203c20[a7_0x4931('0x5c')]]});if(_0x203c20[a7_0x4931('0x3')]){console['log'](_0x203c20[a7_0x4931('0x3')]);}else{console[a7_0x4931('0x10')](_0x203c20);}try{yield _0x42a246[a7_0x4931('0x68')](_0x359fb0,a7_0x4931('0x23')+_0x203c20[a7_0x4931('0x5c')]+'\x22');}finally{process[a7_0x4931('0x5b')](0x1);}}});exports[a7_0x4931('0x43')]=nxCloudDistributedTasksRunner;class TaskOrderer{constructor(_0x553ab9,_0x4a8cda){this[a7_0x4931('0x8')]=_0x553ab9;this[a7_0x4931('0x4f')]=_0x4a8cda;}['splitTasksIntoStages'](_0x34e20a){if(_0x34e20a['length']===0x0)return[];const _0xfe72e1=[];const _0x5abf27=this[a7_0x4931('0xf')](_0x34e20a);const _0xf7b82b=new Set(_0x34e20a[a7_0x4931('0x5a')](_0x2881d9=>_0x2881d9['id']));let _0x4e6877=0x0;while(_0xf7b82b[a7_0x4931('0x25')]>0x0){const _0x25d3cd=_0xfe72e1[_0x4e6877]=[];for(const _0x10bafd of _0xf7b82b){let _0x23ff9f=!![];for(const _0x15b03d of _0x5abf27[a7_0x4931('0x1')][_0x10bafd]){if(_0xf7b82b[a7_0x4931('0x47')](_0x15b03d)){_0x23ff9f=![];break;}}if(!_0x23ff9f){continue;}const _0x263541=_0x5abf27[a7_0x4931('0x52')][_0x10bafd];_0x25d3cd[a7_0x4931('0x15')](_0x263541);}for(const _0x3a59a2 of _0x25d3cd){_0xf7b82b[a7_0x4931('0x2e')](_0x3a59a2['id']);}_0x4e6877++;}return _0xfe72e1;}[a7_0x4931('0xf')](_0x30da20){const _0xe97db3=new TaskGraphCreator(this['projectGraph'],this[a7_0x4931('0x4f')]);return _0xe97db3['createTaskGraph'](_0x30da20);}}class TaskGraphCreator{constructor(_0x5e539e,_0x504156){this[a7_0x4931('0x8')]=_0x5e539e;this[a7_0x4931('0x4f')]=_0x504156;}['createTaskGraph'](_0x39c439){const _0x58ddb5={'roots':[],'tasks':{},'dependencies':{}};for(const _0x43a34c of _0x39c439){this[a7_0x4931('0x31')](_0x43a34c,_0x58ddb5);const _0x74d887=getDependencyConfigs(_0x43a34c[a7_0x4931('0x3a')],this[a7_0x4931('0x4f')],this[a7_0x4931('0x8')]);if(!_0x74d887){continue;}this[a7_0x4931('0x2a')](_0x43a34c,_0x74d887,_0x39c439,_0x58ddb5);}_0x58ddb5[a7_0x4931('0x1b')]=Object[a7_0x4931('0x17')](_0x58ddb5[a7_0x4931('0x1')])[a7_0x4931('0x59')](_0x246d1f=>_0x58ddb5['dependencies'][_0x246d1f]['length']===0x0);return _0x58ddb5;}[a7_0x4931('0x2a')](_0x1b8abe,_0x403e8f,_0x13cdca,_0x49f640){for(const _0x8cfb8 of _0x403e8f){if(_0x8cfb8[a7_0x4931('0x40')]===a7_0x4931('0x9')){for(const _0x5559c9 of _0x13cdca){if(_0x5559c9[a7_0x4931('0x3a')][a7_0x4931('0x4d')]===_0x1b8abe[a7_0x4931('0x3a')][a7_0x4931('0x4d')]&&_0x5559c9[a7_0x4931('0x3a')][a7_0x4931('0x3a')]===_0x8cfb8[a7_0x4931('0x3a')]){_0x49f640[a7_0x4931('0x1')][_0x1b8abe['id']][a7_0x4931('0x15')](_0x5559c9['id']);}}}else if(_0x8cfb8[a7_0x4931('0x40')]===a7_0x4931('0x1')){const _0x33f670=new Set();this[a7_0x4931('0x44')](_0x1b8abe[a7_0x4931('0x3a')][a7_0x4931('0x4d')],_0x8cfb8[a7_0x4931('0x3a')],_0x13cdca,_0x49f640,_0x1b8abe['id'],_0x33f670);}}}[a7_0x4931('0x44')](_0x236c0e,_0x9f613,_0x5ce1b1,_0xdda1c2,_0x568c27,_0xc276e5){_0xc276e5[a7_0x4931('0x0')](_0x236c0e);const _0x21e3f0=this[a7_0x4931('0x8')][a7_0x4931('0x1')][_0x236c0e];if(_0x21e3f0){const _0x1cec17=_0x21e3f0[a7_0x4931('0x5a')](_0x241256=>_0x241256['target']);for(const _0x27af8e of _0x1cec17){if(_0xc276e5[a7_0x4931('0x47')](_0x27af8e)){continue;}const _0x40dbed=this[a7_0x4931('0x32')]({'project':_0x27af8e,'target':_0x9f613},_0x5ce1b1);if(_0x40dbed){if(_0xdda1c2[a7_0x4931('0x1')][_0x568c27][a7_0x4931('0x38')](_0x40dbed['id'])===-0x1){_0xdda1c2[a7_0x4931('0x1')][_0x568c27][a7_0x4931('0x15')](_0x40dbed['id']);}}else{this[a7_0x4931('0x44')](_0x27af8e,_0x9f613,_0x5ce1b1,_0xdda1c2,_0x568c27,_0xc276e5);}}}}[a7_0x4931('0x32')]({project,target},_0x4fbcb0){return _0x4fbcb0['find'](_0x2ed8ef=>_0x2ed8ef['target']['project']===project&&_0x2ed8ef[a7_0x4931('0x3a')][a7_0x4931('0x3a')]===target);}[a7_0x4931('0x31')](_0x3d0271,_0x5dae5b){_0x5dae5b['tasks'][_0x3d0271['id']]=_0x3d0271;_0x5dae5b[a7_0x4931('0x1')][_0x3d0271['id']]=[];}}exports['TaskGraphCreator']=TaskGraphCreator;function getDefaultDependencyConfigs(_0x51facf,_0x3d0626){var _0x1fbcd8,_0x2166a8;const _0x1e1c6b=(_0x1fbcd8=_0x51facf[a7_0x4931('0x24')])!==null&&_0x1fbcd8!==void 0x0?_0x1fbcd8:{};const _0x245020=_0x3d0626?(_0x2166a8=_0x3d0626[a7_0x4931('0x35')])!==null&&_0x2166a8!==void 0x0?_0x2166a8:[a7_0x4931('0x58')]:[];for(const _0x5518a7 of _0x245020){_0x1e1c6b[_0x5518a7]=_0x1e1c6b[_0x5518a7]||[];_0x1e1c6b[_0x5518a7][a7_0x4931('0x15')]({'target':_0x5518a7,'projects':'dependencies'});}return _0x1e1c6b;}